language: node_js
node_js:
- '8'
before_script:
- npm install --global @dhis2/deploy-build
script:
- npm run format
- npm run coverage
- npm run build
deploy:
- provider: script
  script: deploy-build
  skip_cleanup: true
  on:
    all_branches: true
- provider: script
  script: publish-build
  skip_cleanup: true
  on:
    tags: true
env:
  global:
    secure: Q2HQF9WlW8yX/zuoBrWwn0ITKoLHDlRqGIHP67RxRGKitPfs0XHdvlmKar1GMBijrx4xE39RAzVlXYdOcb/4lN1NqlnB3x5dl0CRReVaI1glpx9q1h5XUWLZd0mC70Zdqujt90/pyWnFD1h4yITXvco50PvZjkh3VlK8v7p8/0cbv9pwwtaxCOmw05jLVPq9eccPPXD3onEmfp6XqUOHsFA8yipi+1W/w1+2IhtwtlMhmbA5G4On0L3D2OTP9KYm3bmj59kGxzMmpCvuoY0NPI5TxzJyj9rCrXewNTdJOlV8D0RULs66IDpnkDKAlClRjEXNG1nfRQHZIuZnUF30Snbf3yvvoQlHyJy378o93UxWDlffR7GdDcMLaAFM3ThBFbvE8M2KvM77e/pEdXRKgQh64SyRta/iFPizGZJ71b0jbjR+wsyjsFwXNcb2MdPR9GciizQML2Sn8VwcYgOAzuNHrWPQEm0GiXglCOs3rZp2Nl6wHdEFKtipt2TWRDaVyaj4l+mCt/tnw1gLejFLkJWt/0dh71xPVipSmybvhgu1uyqDEz6aEXWli1h+yZFiFiu5u4AIM+OGdWHXuB/yzH2DhZoDez/iWD6/YCvBgTu3rUyyBh3WXA2zPpcb2RZ5oZiesnBahZeWKpamPRNheymNacHi7GnmBExPFQS/3rM=
